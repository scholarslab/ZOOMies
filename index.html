<!DOCTYPE html>
<html>
<head>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script> 
<title>dogs totally going so fast</title>
<style>
#zoomframe {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
  height: 100%; 
  overflow: hidden;
}
video {  
  width: 100%;
  height: 100%;
  
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
}
body
{
	background-color: black;
}
</style>
</head>
<body>

<!--Modified https://gist.github.com/pixelbart/d34173e01e7f7357be6c3199010b389e
Working on local but not on live site fixed via consule => turning off Firefox advanced tracking protection
No way to get audio+video together because of Reddit's imposed constraints to avoid hotlinking-->

<script>
$(document).ready( function() {
  var subreddit = 'zoomies';
	var aRandomNum = Math.floor((Math.random() * 100) + 1);
		$.getJSON('https://www.reddit.com/r/'+subreddit+'.json?jsonp=?&show=all&limit=100', function(data) {
			$.each(data.data.children, function(i,item){
        if (i >= aRandomNum) {
          console.log(item)
          var title = item.data.title.toString();
          var link = "https://www.reddit.com/"+item.data.permalink.toString();
          if (item.data.secure_media && item.data.secure_media.reddit_video){
            var vid = item.data.secure_media.reddit_video.fallback_url.toString();
          } else if (item.data.crosspost_parent_list && item.data.crosspost_parent_list[0].is_video && item.data.crosspost_parent_list[0].media){
            var vid = item.data.crosspost_parent_list[0].media.reddit_video.fallback_url.toString();
          } else if (item.data.preview.reddit_video_preview) {
            var vid = item.data.preview.reddit_video_preview.fallback_url.toString();
          } else {
            return;
          }
					$("<video loop autoplay/>").attr({"src": vid, "title":title}).appendTo("#zoomlink");
          $("#zoomlink").attr("href", link)
					return false;
				}
			});
		});
		
});
</script>

<div id="zoomframe" alt="randomly selected GIF of dog doing a zoom"><a id="zoomlink"></a></div>

</body>
</html>
